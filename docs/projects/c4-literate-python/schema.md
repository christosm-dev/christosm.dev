---
title: "Schema Documentation"
---

<!-- 
=============================================================================
⚠️  DO NOT EDIT THIS FILE DIRECTLY
=============================================================================

This file is automatically generated from c4-annotations-schema.yaml

To make changes:
1. Edit c4-annotations-schema.yaml
2. Run: make docs (or python3 generate_schema_docs.py)
3. Commit both files

=============================================================================
-->

# C4 Annotation Schema Reference

**Version:** 0.9.0

This document describes all available C4 model annotations for use in
Python docstrings and comments.

---

## Table of Contents

- [Structure Annotations](#structure-annotations)
- [Attribute Annotations](#attribute-annotations)
- [Relationship Annotations](#relationship-annotations)
- [Validation Rules](#validation-rules)
- [Best Practices](#best-practices)
- [Future Extensions](#future-extensions)

---

## Structure Annotations

These annotations declare what C4 elements exist in your system.

### `@c4-container`

Declares that this module represents a C4 container (deployable unit like a web application, database, mobile app, etc.)


**Format:** `Name of the container`

**Placement:** `module`

**Required attributes:**
- `@c4-technology`
- `@c4-description`

**Optional attributes:**
- `@c4-responsibilities`

**Examples:**

```python
"""@c4-container: API Application"""
"""@c4-container: Database Layer"""
"""@c4-container: Message Queue"""
```

**Notes:**

Containers are the high-level building blocks of your system. Each container is separately deployable and typically runs in its own process space.


---

### `@c4-component`

Declares that this module or class represents a C4 component (a grouping of related functionality within a container)


**Format:** `Name of the component`

**Placement:** `module`, `class`

**Required attributes:**
- `@c4-technology`

**Optional attributes:**
- `@c4-description`

**Examples:**

```python
"""@c4-component: Data Validation Layer"""
"""@c4-component: API Request Handler"""
"""@c4-component: Authentication Service"""
```

**Notes:**

Components are the major structural elements within a container. They represent groupings of related functionality.


**⚠️ Component Assignment:**

Components are automatically assigned to containers based on filepath. If a component and container are in the same file, the component is nested inside that container. Otherwise, the component is assigned to the first available container. See docs/ADR-001-component-assignment.md for details.


---

## Attribute Annotations

These annotations describe properties of C4 elements.

### `@c4-technology`

Describes the technology or tech stack used to implement this element


**Format:** `Technology stack description`

**Placement:** `module`, `class`, `function`

**Examples:**

```python
"""@c4-technology: Python 3.12, FastAPI 0.104"""
"""@c4-technology: SQLAlchemy 2.0, SQLite 3"""
"""@c4-technology: Pydantic 2.0"""
```

**Notes:**

Be specific about versions when relevant for documentation purposes.


---

### `@c4-description`

Provides a brief description of what this element does or represents


**Format:** `Brief description (1-2 sentences recommended)`

**Placement:** `module`, `class`, `function`

**Examples:**

```python
"""@c4-description: REST API providing CRUD operations for notes"""
"""@c4-description: Validates and serializes request/response data"""
```

**Notes:**

Keep descriptions concise and focused on the primary responsibility. Detailed explanations belong in the surrounding prose documentation.


---

### `@c4-responsibilities`

Lists the key responsibilities of this element

**Format:** `Bullet list of responsibilities (one per line, indented)`

**Placement:** `module`, `class`

**Examples:**

```python
"""
@c4-responsibilities:
    - Accept and validate HTTP requests
    - Route requests to handlers
    - Transform responses to JSON

"""
```

**Notes:**

Each responsibility should be a brief action phrase. Typically 3-7 items.


---

## Relationship Annotations

These annotations describe how C4 elements interact.

### `@c4-uses`

Declares that this element depends on or uses another container or component


**Format:** `Target - "Description" - "Technology"`

**Placement:** `module`, `class`

**Examples:**

```python
"""@c4-uses: Database Layer (app.database) - "Manages note persistence" - "SQLAlchemy ORM""""
"""@c4-uses: Data Models (app.models) - "Validates requests" - "Pydantic""""
```

**Notes:**

The three parts are: (1) Target name with optional module path in parens, (2) Action description in quotes, (3) Technology/ protocol in quotes.


---

### `@c4-used-by`

Declares that this element is used by another container or component (inverse of @c4-uses)


**Format:** `Source - "Description" - "Technology"`

**Placement:** `module`, `class`

**Examples:**

```python
"""@c4-used-by: API Application (app.main) - "Requests database sessions" - "SQLAlchemy ORM""""
```

**Notes:**

Use this for documenting reverse dependencies when the relationship is important to understand from this element's perspective.


---

### `@c4-used-by-person`

Declares that this element is used by an external actor (person or external system acting as a user)


**Format:** `Person name - "Description" - "Technology/Protocol"`

**Placement:** `module`, `class`

**Examples:**

```python
"""@c4-used-by-person: API Consumer - "Creates and manages notes" - "HTTPS/JSON""""
"""@c4-used-by-person: System Administrator - "Monitors health" - "HTTPS""""
```

**Notes:**

Persons represent human actors or external systems that interact with your system from the outside.


---

### `@c4-operation`

Declares that this function represents a significant operation within a component


**Format:** `Operation name (typically function name)`

**Placement:** `function`

**Examples:**

```python
"""@c4-operation: create_note"""
"""@c4-operation: authenticate_user"""
```

**Notes:**

Operations are the finest level of detail, showing key functions within components. Only annotate significant operations, not every function.


---

### `@c4-calls`

Declares that this operation calls another component or container


**Format:** `Target - "Description"`

**Placement:** `function`

**Examples:**

```python
"""@c4-calls: Database Layer - "Persists new note""""
"""@c4-calls: Authentication Service - "Validates token""""
```

**Notes:**

Use this to show data flow and interactions at the operation level. Two-part format: Target and action description.


---

### `@c4-relationship`

Generic relationship annotation for advanced use cases not covered by @c4-uses/@c4-calls


**Format:** `Generic relationship declaration`

**Placement:** `module`, `class`, `function`

**Examples:**

```python
"""@c4-relationship: Initializes Database Container on startup"""
```

**Notes:**

Use specific annotations (@c4-uses, @c4-calls) when possible. This is for special cases.


---

## Validation Rules

### Container Requirements

A module with @c4-container must have @c4-technology and @c4-description


**Required annotations:**
- `@c4-technology`
- `@c4-description`

### Component Requirements

A module or class with @c4-component must have @c4-technology


**Required annotations:**
- `@c4-technology`

### Relationship Format

Relationship annotations must follow the specified format with proper quoting


## Best Practices

### Placement

Place container declarations at module level, component declarations at module or class level, operation declarations at function level


### Naming

Use clear, consistent names that match your architecture documentation


### Descriptions

Keep descriptions concise (1-2 sentences). Use surrounding prose for detailed explanations


### Relationships

Document relationships from the perspective of the element being annotated


### Consistency

Use consistent terminology across all annotations in your codebase


## Future Extensions

The following annotations are planned for future versions:

- `@c4-software-system: For declaring system context`
- `@c4-person: For declaring external actors`
- `@c4-database: For declaring data stores`
- `@c4-external-system: For declaring external dependencies`
- `@c4-deployment-node: For deployment context`
- `@c4-security-zone: For security boundaries`
- `@c4-parent-container: For explicit component-to-container assignment`

---

## References

- **C4 Model**: https://c4model.com/
- **Structurizr Dsl**: https://github.com/structurizr/dsl
- **Repository**: https://github.com/yourusername/c4-literate-python
- **Adr Component Assignment**: docs/ADR-001-component-assignment.md
